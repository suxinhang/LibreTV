# LibreTV å®Œæ•´éƒ¨ç½²æŒ‡å—

> æœ¬æŒ‡å—æ¶µç›–äº† LibreTV é¡¹ç›®çš„å¤šç§éƒ¨ç½²æ–¹å¼ï¼ŒåŒ…æ‹¬æœ€æ–°å®ç°çš„æ— é™æ»šåŠ¨åŠŸèƒ½

## ğŸš€ é¡¹ç›®ç‰¹æ€§

- âœ… **æ— é™æ»šåŠ¨æœç´¢ä½“éªŒ** - ç±»ä¼¼æŠ–éŸ³ã€å¾®åšçš„æ²‰æµ¸å¼æµè§ˆ
- âœ… **å¤šæºè§†é¢‘èšåˆ** - æ”¯æŒå¤šä¸ªè§†é¢‘APIæº
- âœ… **å¯†ç ä¿æŠ¤** - ç¡®ä¿å®‰å…¨è®¿é—®
- âœ… **å“åº”å¼è®¾è®¡** - é€‚é…æ‰€æœ‰è®¾å¤‡
- âœ… **PWAæ”¯æŒ** - å¯å®‰è£…ä¸ºåº”ç”¨

## ğŸ“‹ éƒ¨ç½²æ–¹å¼å¯¹æ¯”

| å¹³å° | éš¾åº¦ | è´¹ç”¨ | æ€§èƒ½ | æ¨èåº¦ |
|------|------|------|------|--------|
| Cloudflare Workers | â­â­ | å…è´¹ | â­â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| Vercel | â­ | å…è´¹ | â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| Netlify | â­ | å…è´¹ | â­â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ğŸ”¥ |
| Docker | â­â­â­ | æœåŠ¡å™¨æˆæœ¬ | â­â­â­ | ğŸ”¥ğŸ”¥ğŸ”¥ |

## ğŸŒŸ æ–¹æ¡ˆä¸€ï¼šCloudflare Workers éƒ¨ç½²ï¼ˆæ¨èï¼‰

### ç‰¹ç‚¹
- âœ… **å…¨çƒCDNåŠ é€Ÿ**
- âœ… **é›¶æœåŠ¡å™¨æˆæœ¬**
- âœ… **è‡ªåŠ¨HTTPS**
- âœ… **è¾¹ç¼˜è®¡ç®—**

### éƒ¨ç½²æ­¥éª¤

#### 1. å‡†å¤‡å·¥ä½œ
```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/suxinhang/LibreTV.git
cd LibreTV

# å®‰è£…ä¾èµ–
npm install
```

#### 2. é…ç½®ç¯å¢ƒ
```bash
# åˆ›å»º .env æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env è®¾ç½®å¯†ç 
echo "PASSWORD=ä½ çš„å¯†ç " > .env
```

#### 3. éƒ¨ç½²åˆ° Workers
```bash
# ä¸€é”®éƒ¨ç½²
npx wrangler deploy

# è®¾ç½®å¯†ç ç¯å¢ƒå˜é‡
npx wrangler secret put PASSWORD
# è¾“å…¥ä½ çš„å¯†ç 
```

#### 4. è®¿é—®åº”ç”¨
- éƒ¨ç½²å®Œæˆåä¼šæ˜¾ç¤º URLï¼š`https://libretv.ä½ çš„ç”¨æˆ·å.workers.dev`
- ä½¿ç”¨è®¾ç½®çš„å¯†ç ç™»å½•å³å¯

### è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰
```bash
# åœ¨ wrangler.toml ä¸­æ·»åŠ 
[routes]
pattern = "libretv.yourdomain.com/*"
zone_name = "yourdomain.com"

# é‡æ–°éƒ¨ç½²
npx wrangler deploy
```

## ğŸš€ æ–¹æ¡ˆäºŒï¼šVercel éƒ¨ç½²

### ä¸€é”®éƒ¨ç½²
[![Deploy with Vercel](https://vercel.com/button)](https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fsuxinhang%2FLibreTV)

### æ‰‹åŠ¨éƒ¨ç½²
```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel

# è®¾ç½®ç¯å¢ƒå˜é‡
vercel env add PASSWORD
```

## ğŸŒ æ–¹æ¡ˆä¸‰ï¼šNetlify éƒ¨ç½²

### ä¸€é”®éƒ¨ç½²
[![Deploy to Netlify](https://www.netlify.com/img/deploy/button.svg)](https://app.netlify.com/start/deploy?repository=https://github.com/suxinhang/LibreTV)

### æ‰‹åŠ¨éƒ¨ç½²
```bash
# å®‰è£… Netlify CLI
npm install -g netlify-cli

# ç™»å½•
netlify login

# éƒ¨ç½²
netlify deploy --prod

# è®¾ç½®ç¯å¢ƒå˜é‡
netlify env:set PASSWORD "ä½ çš„å¯†ç "
```

## ğŸ³ æ–¹æ¡ˆå››ï¼šDocker éƒ¨ç½²

### ä½¿ç”¨ Docker Composeï¼ˆæ¨èï¼‰
```bash
# åˆ›å»º docker-compose.yml
version: '3.8'
services:
  libretv:
    image: bestzwei/libretv:latest
    container_name: libretv
    ports:
      - "8899:8080"
    environment:
      - PASSWORD=ä½ çš„å¯†ç 
    restart: unless-stopped

# å¯åŠ¨
docker compose up -d
```

### ç›´æ¥ä½¿ç”¨ Docker
```bash
docker run -d \
  --name libretv \
  --restart unless-stopped \
  -p 8899:8080 \
  -e PASSWORD=ä½ çš„å¯†ç  \
  bestzwei/libretv:latest
```

## ğŸ”§ é«˜çº§é…ç½®

### ç¯å¢ƒå˜é‡é…ç½®
```bash
# åŸºæœ¬é…ç½®
PORT=8080                    # ç«¯å£å·
PASSWORD=ä½ çš„å¯†ç             # è®¿é—®å¯†ç ï¼ˆå¿…é¡»ï¼‰
DEBUG=false                  # è°ƒè¯•æ¨¡å¼

# ç½‘ç»œé…ç½®
CORS_ORIGIN=*               # CORS å…è®¸çš„æ¥æº
REQUEST_TIMEOUT=5000        # è¯·æ±‚è¶…æ—¶æ—¶é—´
MAX_RETRIES=2               # æœ€å¤§é‡è¯•æ¬¡æ•°

# å®‰å…¨é…ç½®
BLOCKED_HOSTS=localhost,127.0.0.1,0.0.0.0,::1
BLOCKED_IP_PREFIXES=192.168.,10.,172.
```

### è‡ªå®šä¹‰APIæº
1. è¿›å…¥è®¾ç½®é¡µé¢
2. æ·»åŠ è‡ªå®šä¹‰æ¥å£
3. è¾“å…¥APIåœ°å€ï¼š`https://example.com/api.php/provide/vod`
4. ä¿å­˜é…ç½®

## ğŸ“± ç§»åŠ¨ç«¯ä¼˜åŒ–

### PWA å®‰è£…
1. åœ¨æµè§ˆå™¨ä¸­è®¿é—®ç½‘ç«™
2. ç‚¹å‡»"æ·»åŠ åˆ°ä¸»å±å¹•"
3. å³å¯åƒåŸç”Ÿåº”ç”¨ä¸€æ ·ä½¿ç”¨

### å“åº”å¼ç‰¹æ€§
- âœ… æ‰‹æœºç«¯ä¼˜åŒ–çš„è§¦æ‘¸æ“ä½œ
- âœ… å¹³æ¿ç«¯é€‚é…çš„ç½‘æ ¼å¸ƒå±€
- âœ… æ¡Œé¢ç«¯çš„å®Œæ•´åŠŸèƒ½ä½“éªŒ

## ğŸ›¡ï¸ å®‰å…¨å»ºè®®

### å¿…éœ€é…ç½®
```bash
# å¿…é¡»è®¾ç½®å¯†ç ä¿æŠ¤
PASSWORD=å¼ºå¯†ç 123!@#

# å»ºè®®é™åˆ¶è®¿é—®æ¥æº
CORS_ORIGIN=https://yourdomain.com
```

### é˜²æŠ¤æªæ–½
- âœ… **å¯†ç ä¿æŠ¤** - é˜²æ­¢æœªæˆæƒè®¿é—®
- âœ… **CORSé™åˆ¶** - é˜²æ­¢è·¨åŸŸæ”»å‡»
- âœ… **è¯·æ±‚é™åˆ¶** - é˜²æ­¢æ¶æ„è¯·æ±‚
- âœ… **å†…å®¹è¿‡æ»¤** - å¯é€‰çš„å†…å®¹è¿‡æ»¤åŠŸèƒ½

## ğŸ” æ— é™æ»šåŠ¨åŠŸèƒ½

### æ–°åŠŸèƒ½ç‰¹æ€§
- **æ™ºèƒ½åŠ è½½** - è·ç¦»åº•éƒ¨200pxè‡ªåŠ¨åŠ è½½
- **é˜²æŠ–æœºåˆ¶** - é¿å…é¢‘ç¹è¯·æ±‚
- **çŠ¶æ€ç®¡ç†** - å®Œå–„çš„åŠ è½½çŠ¶æ€è¿½è¸ª
- **ç”¨æˆ·ä½“éªŒ** - å¹³æ»‘çš„å†…å®¹è¿½åŠ 

### ä½¿ç”¨æ–¹æ³•
1. æœç´¢ä»»æ„å†…å®¹
2. å‘ä¸‹æ»šåŠ¨åˆ°é¡µé¢åº•éƒ¨
3. ç³»ç»Ÿè‡ªåŠ¨åŠ è½½æ›´å¤šå†…å®¹
4. æ— éœ€æ‰‹åŠ¨ç¿»é¡µ

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### Cloudflare Workers ä¼˜åŠ¿
- **å…¨çƒCDN** - å°±è¿‘è®¿é—®ï¼Œé€Ÿåº¦æ›´å¿«
- **è¾¹ç¼˜è®¡ç®—** - å‡å°‘å»¶è¿Ÿ
- **è‡ªåŠ¨ç¼©æ”¾** - æ— éœ€æ‹…å¿ƒå¹¶å‘
- **é›¶å†·å¯åŠ¨** - å³æ—¶å“åº”

### ä¼˜åŒ–å»ºè®®
```bash
# å¯ç”¨ç¼“å­˜
CACHE_MAX_AGE=1d

# å‹ç¼©ä¼ è¾“
gzip on

# å›¾ç‰‡æ‡’åŠ è½½
loading="lazy"
```

## ğŸš¨ å¸¸è§é—®é¢˜

### Q1: éƒ¨ç½²åæ— æ³•è®¿é—®ï¼Ÿ
**A:** æ£€æŸ¥ç¯å¢ƒå˜é‡ `PASSWORD` æ˜¯å¦æ­£ç¡®è®¾ç½®

### Q2: è§†é¢‘æ— æ³•æ’­æ”¾ï¼Ÿ
**A:** ç¡®ä¿ä»£ç†åŠŸèƒ½æ­£å¸¸ï¼Œæ£€æŸ¥ç½‘ç»œè¿æ¥

### Q3: æœç´¢ç»“æœä¸ºç©ºï¼Ÿ
**A:** æ£€æŸ¥APIæºé…ç½®ï¼Œç¡®ä¿APIåœ°å€æœ‰æ•ˆ

### Q4: æ— é™æ»šåŠ¨ä¸å·¥ä½œï¼Ÿ
**A:** ç¡®ä¿JavaScriptå·²å¯ç”¨ï¼Œåˆ·æ–°é¡µé¢é‡è¯•

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é¡¹ç›®åœ°å€**: https://github.com/suxinhang/LibreTV
- **é—®é¢˜åé¦ˆ**: é€šè¿‡ GitHub Issues æäº¤
- **æ›´æ–°æ—¥å¿—**: æŸ¥çœ‹ GitHub Releases

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ Apache 2.0 è®¸å¯è¯ï¼Œè¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

---

*æœ€åæ›´æ–°: 2025å¹´8æœˆ*
*åŒ…å«æœ€æ–°çš„æ— é™æ»šåŠ¨åŠŸèƒ½å’ŒCloudflare Workerséƒ¨ç½²æ”¯æŒ*